{
  "info": {
    "_postman_id": "d3e7b6c4-1234-5678-9abc-def012345678",
    "name": "Dotra Vendor API",
    "description": "Complete API collection for Dotra vendor-facing operations. All endpoints are scoped under a vendor (identified by slug).\n\n## Base URL\n- Local: `http://localhost/api/v1`\n- Production: `https://api.dotra.com/api/v1`\n\n## API Versioning\nAll endpoints are versioned under `/v1`. This is version 1 of the API.\n\n## Authentication\nCurrently authentication middleware is commented out, but endpoints may require authentication in the future.\n\n## Variables\n- `baseUrl`: Base API URL\n- `vendorSlug`: Vendor identifier (e.g., 'dotra', 'tech-corp')\n- `applicationId`: Application ID for testing\n- `customerId`: Customer ID for testing",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000/api",
      "type": "string",
      "description": "Base URL for the API"
    },
    {
      "key": "vendorSlug",
      "value": "dotra",
      "type": "string",
      "description": "Vendor slug identifier"
    },
    {
      "key": "applicationId",
      "value": "550e8400-e29b-41d4-a716-446655440000",
      "type": "string",
      "description": "Application ID for testing"
    },
    {
      "key": "customerId",
      "value": "6ba7b810-9dad-11d1-80b4-00c04fd430c8",
      "type": "string",
      "description": "Customer ID for testing"
    }
  ],
  "item": [
    {
      "name": "Applications",
      "description": "Endpoints for managing financing applications",
      "item": [
        {
          "name": "List Applications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications?per_page=15",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "applications"
              ],
              "query": [
                {
                  "key": "per_page",
                  "value": "15",
                  "description": "Number of items per page (optional, default: 15)"
                }
              ]
            },
            "description": "Retrieve a paginated list of all applications for a vendor. Includes related customer data.\n\n**Response includes:**\n- Application details (amount, installments, interest rate, status)\n- Customer information (name, national code, mobile)\n- Pagination metadata"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications?per_page=15",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "applications"
                  ],
                  "query": [
                    {
                      "key": "per_page",
                      "value": "15"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": [\n        {\n            \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"vendor_id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n            \"credit_score_id\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n            \"total_amount\": 10000000,\n            \"number_of_installments\": 12,\n            \"interest_rate\": \"12.50\",\n            \"suggested_total_amount\": 8000000,\n            \"suggested_number_of_installments\": 10,\n            \"suggested_interest_rate\": \"10.00\",\n            \"status\": \"pending\",\n            \"credit_score\": {\n                \"id\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n                \"overall_score\": 720,\n                \"status\": \"completed\"\n            },\n            \"customer\": {\n                \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n                \"national_code\": \"1234567890\",\n                \"mobile\": \"09123456789\",\n                \"first_name\": \"علی\",\n                \"last_name\": \"احمدی\",\n                \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n                \"email\": \"ali.ahmadi@example.com\",\n                \"address\": \"تهران، خیابان ولیعصر\",\n                \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n                \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n            },\n            \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n            \"updated_at\": \"2024-01-20T14:30:00.000000Z\"\n        }\n    ],\n    \"links\": {\n        \"first\": \"http://localhost:8000/api/v1/vendors/dotra/applications?page=1\",\n        \"last\": \"http://localhost:8000/api/v1/vendors/dotra/applications?page=3\",\n        \"prev\": null,\n        \"next\": \"http://localhost:8000/api/v1/vendors/dotra/applications?page=2\"\n    },\n    \"meta\": {\n        \"current_page\": 1,\n        \"from\": 1,\n        \"last_page\": 3,\n        \"path\": \"http://localhost:8000/api/v1/vendors/dotra/applications\",\n        \"per_page\": 15,\n        \"to\": 15,\n        \"total\": 35\n    }\n}"
            }
          ]
        },
        {
          "name": "Create Application",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "JSON content type"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n    \"credit_score_id\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n    \"total_amount\": 10000000,\n    \"number_of_installments\": 12,\n    \"interest_rate\": 12.5,\n    \"suggested_total_amount\": 8000000,\n    \"suggested_number_of_installments\": 10,\n    \"suggested_interest_rate\": 10.0,\n    \"status\": \"pending\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "applications"
              ]
            },
            "description": "Create a new financing application for a customer under the vendor.\n\n**Required Fields:**\n- `customer_id` (UUID): Must exist in customers table\n- `credit_score_id` (UUID): Must belong to the provided customer\n- `total_amount` (integer): Minimum 1\n- `number_of_installments` (integer): Between 1 and 32767\n- `suggested_total_amount` (integer): Minimum 1\n- `suggested_number_of_installments` (integer): Between 1 and 32767\n\n**Optional Fields:**\n- `interest_rate` (numeric): Minimum 0\n- `suggested_interest_rate` (numeric): Minimum 0\n- `status` (string): Max 255 characters\n\n> The credit score associated with an application is immutable after creation."
          },
          "response": [
            {
              "name": "Success Response (Created)",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n    \"credit_score_id\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n    \"total_amount\": 10000000,\n    \"number_of_installments\": 12,\n    \"interest_rate\": 12.5,\n    \"suggested_total_amount\": 8000000,\n    \"suggested_number_of_installments\": 10,\n    \"suggested_interest_rate\": 10.0,\n    \"status\": \"pending\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "applications"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"vendor_id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n        \"credit_score_id\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n        \"total_amount\": 10000000,\n        \"number_of_installments\": 12,\n        \"interest_rate\": \"12.50\",\n        \"suggested_total_amount\": 8000000,\n        \"suggested_number_of_installments\": 10,\n        \"suggested_interest_rate\": \"10.00\",\n        \"status\": \"pending\",\n        \"credit_score\": {\n            \"id\": \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",\n            \"overall_score\": 720,\n            \"status\": \"completed\"\n        },\n        \"vendor\": {\n            \"id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n            \"name\": \"Acme Store\",\n            \"slug\": \"dotra\",\n            \"mobile\": \"09121234567\",\n            \"type\": \"business\",\n            \"email\": \"info@acmestore.com\"\n        },\n        \"customer\": {\n            \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"national_code\": \"1234567890\",\n            \"mobile\": \"09123456789\",\n            \"first_name\": \"علی\",\n            \"last_name\": \"احمدی\",\n            \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n            \"email\": \"ali.ahmadi@example.com\",\n            \"address\": \"تهران، خیابان ولیعصر\"\n        },\n        \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n        \"updated_at\": \"2024-01-20T14:30:00.000000Z\"\n    }\n}"
            },
            {
              "name": "Validation Error",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"customer_id\": \"invalid-uuid\",\n    \"credit_score_id\": \"invalid-uuid\",\n    \"total_amount\": -100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "applications"
                  ]
                }
              },
              "status": "Unprocessable Entity",
              "code": 422,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"message\": \"The customer id field must be a valid UUID. (and 6 more errors)\",\n    \"errors\": {\n        \"customer_id\": [\"The customer id field must be a valid UUID.\", \"The selected customer id is invalid.\"],\n        \"credit_score_id\": [\"The credit score id field must be a valid UUID.\", \"The selected credit score id is invalid.\"],\n        \"total_amount\": [\"The total amount must be at least 1.\"],\n        \"number_of_installments\": [\"The number of installments field is required.\"],\n        \"suggested_total_amount\": [\"The suggested total amount field is required.\"],\n        \"suggested_number_of_installments\": [\"The suggested number of installments field is required.\"]\n    }\n}"
            }
          ]
        },
        {
          "name": "View Application (Edit)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications/{{applicationId}}/edit",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "applications",
                "{{applicationId}}",
                "edit"
              ]
            },
            "description": "Fetch a single application with all related data for editing purposes.\n\n**Includes:**\n- Application details\n- Customer information\n- Vendor information\n- Installments (if any)\n\n**Note:** Requires authorization (user must have 'view' permission for the application)."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications/{{applicationId}}/edit",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "applications",
                    "{{applicationId}}",
                    "edit"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"vendor_id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n        \"total_amount\": 10000000,\n        \"number_of_installments\": 12,\n        \"interest_rate\": \"12.50\",\n        \"suggested_total_amount\": 8000000,\n        \"suggested_number_of_installments\": 10,\n        \"suggested_interest_rate\": \"10.00\",\n        \"status\": \"approved\",\n        \"vendor\": {\n            \"id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n            \"name\": \"Acme Store\",\n            \"slug\": \"dotra\",\n            \"mobile\": \"09121234567\",\n            \"type\": \"business\",\n            \"industry\": \"retail\",\n            \"email\": \"info@acmestore.com\",\n            \"website_url\": \"https://acmestore.com\",\n            \"created_at\": \"2024-01-01T00:00:00.000000Z\",\n            \"updated_at\": \"2024-01-01T00:00:00.000000Z\"\n        },\n        \"customer\": {\n            \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"national_code\": \"1234567890\",\n            \"mobile\": \"09123456789\",\n            \"first_name\": \"علی\",\n            \"last_name\": \"احمدی\",\n            \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n            \"email\": \"ali.ahmadi@example.com\",\n            \"address\": \"تهران، خیابان ولیعصر\",\n            \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n            \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n        },\n        \"installments\": [\n            {\n                \"id\": \"8ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n                \"application_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n                \"installment_number\": 1,\n                \"amount\": 833333,\n                \"due_date\": \"2024-02-20T00:00:00.000000Z\",\n                \"paid_at\": null,\n                \"status\": \"pending\",\n                \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n                \"updated_at\": \"2024-01-20T14:30:00.000000Z\"\n            },\n            {\n                \"id\": \"9ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n                \"application_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n                \"installment_number\": 2,\n                \"amount\": 833333,\n                \"due_date\": \"2024-03-20T00:00:00.000000Z\",\n                \"paid_at\": null,\n                \"status\": \"pending\",\n                \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n                \"updated_at\": \"2024-01-20T14:30:00.000000Z\"\n            }\n        ],\n        \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n        \"updated_at\": \"2024-01-20T14:30:00.000000Z\"\n    }\n}"
            }
          ]
        },
        {
          "name": "Update Application",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "JSON content type"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"total_amount\": 12000000,\n    \"number_of_installments\": 14,\n    \"interest_rate\": 11.8\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications/{{applicationId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "applications",
                "{{applicationId}}"
              ]
            },
            "description": "Update an existing application. Supports both PUT and PATCH methods.\n\n**Vendors can only update the following fields (all optional):**\n- `total_amount` (integer): Minimum 1\n- `number_of_installments` (integer): Between 1 and 32767\n- `interest_rate` (numeric, nullable): Minimum 0\n\n**Important Restrictions:**\n- `customer_id` cannot be updated\n- `credit_score_id` cannot be updated (immutable after creation)\n- `suggested_total_amount`, `suggested_number_of_installments`, and `suggested_interest_rate` cannot be updated by vendors\n- `status` is managed automatically by model logic and cannot be set via this endpoint\n\n**Note:** Requires authorization (user must have 'update' permission for the application)."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"total_amount\": 12000000,\n    \"number_of_installments\": 14,\n    \"interest_rate\": 11.8\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/applications/{{applicationId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "applications",
                    "{{applicationId}}"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"vendor_id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n        \"total_amount\": 12000000,\n        \"number_of_installments\": 14,\n        \"interest_rate\": \"11.80\",\n        \"suggested_total_amount\": 8000000,\n        \"suggested_number_of_installments\": 10,\n        \"suggested_interest_rate\": \"10.00\",\n        \"status\": \"approved\",\n        \"vendor\": {\n            \"id\": \"7c9e6679-7425-40de-944b-e07fc1f90ae7\",\n            \"name\": \"Acme Store\",\n            \"slug\": \"dotra\"\n        },\n        \"customer\": {\n            \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"national_code\": \"1234567890\",\n            \"mobile\": \"09123456789\",\n            \"first_name\": \"علی\",\n            \"last_name\": \"احمدی\"\n        },\n        \"installments\": [\n            {\n                \"id\": \"8ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n                \"application_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n                \"installment_number\": 1,\n                \"amount\": 857142,\n                \"due_date\": \"2024-02-20T00:00:00.000000Z\",\n                \"paid_at\": null,\n                \"status\": \"pending\"\n            }\n        ],\n        \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n        \"updated_at\": \"2024-01-20T15:45:00.000000Z\"\n    }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Customers",
      "description": "Endpoints for managing customers associated with a vendor",
      "item": [
        {
          "name": "List Customers",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers?per_page=15",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "customers"
              ],
              "query": [
                {
                  "key": "per_page",
                  "value": "15",
                  "description": "Number of items per page (optional, default: 15)"
                }
              ]
            },
            "description": "Retrieve a paginated list of customers that have at least one application with the vendor.\n\n**Note:** Only returns customers who have created applications with this specific vendor.\n\n**Response includes:**\n- Customer details (name, national code, mobile, email, address)\n- Pagination metadata"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers?per_page=15",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers"
                  ],
                  "query": [
                    {
                      "key": "per_page",
                      "value": "15"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": [\n        {\n            \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"national_code\": \"1234567890\",\n            \"mobile\": \"09123456789\",\n            \"first_name\": \"علی\",\n            \"last_name\": \"احمدی\",\n            \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n            \"email\": \"ali.ahmadi@example.com\",\n            \"address\": \"تهران، خیابان ولیعصر، پلاک 123\",\n            \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n            \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n        },\n        {\n            \"id\": \"7ba7b810-9dad-11d1-80b4-00c04fd430c9\",\n            \"national_code\": \"0987654321\",\n            \"mobile\": \"09187654321\",\n            \"first_name\": \"سارا\",\n            \"last_name\": \"محمدی\",\n            \"birth_date\": \"1992-08-20T00:00:00.000000Z\",\n            \"email\": \"sara.mohammadi@example.com\",\n            \"address\": \"اصفهان، خیابان چهارباغ\",\n            \"created_at\": \"2024-01-16T11:20:00.000000Z\",\n            \"updated_at\": \"2024-01-16T11:20:00.000000Z\"\n        }\n    ],\n    \"links\": {\n        \"first\": \"http://localhost:8000/api/vendors/dotra/customers?page=1\",\n        \"last\": \"http://localhost:8000/api/vendors/dotra/customers?page=2\",\n        \"prev\": null,\n        \"next\": \"http://localhost:8000/api/vendors/dotra/customers?page=2\"\n    },\n    \"meta\": {\n        \"current_page\": 1,\n        \"from\": 1,\n        \"last_page\": 2,\n        \"path\": \"http://localhost:8000/api/vendors/dotra/customers\",\n        \"per_page\": 15,\n        \"to\": 15,\n        \"total\": 25\n    }\n}"
            }
          ]
        },
        {
          "name": "Create or Fetch Customer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "JSON content type"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"national_code\": \"1234567890\",\n    \"mobile\": \"09123456789\",\n    \"first_name\": \"علی\",\n    \"last_name\": \"احمدی\",\n    \"birth_date\": \"1990-05-15\",\n    \"email\": \"ali.ahmadi@example.com\",\n    \"address\": \"تهران، خیابان ولیعصر، پلاک 123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "customers"
              ]
            },
            "description": "Create a new customer or return existing customer if national code already exists.\n\n**Behavior:**\n- If customer with `national_code` exists: Returns existing customer (HTTP 200)\n- If customer is new: Creates and returns new customer (HTTP 201)\n\n**Required Fields:**\n- `national_code` (string): Exactly 10 characters\n- `mobile` (string): Must match pattern `^09\\d{9}$` (Iranian mobile format)\n- `first_name` (string): Max 255 characters, must be Persian name\n- `last_name` (string): Max 255 characters, must be Persian name\n- `birth_date` (date): Valid date format (YYYY-MM-DD)\n\n**Optional Fields:**\n- `email` (string): Valid email format, max 255 characters\n- `address` (string): Max 255 characters\n\n**Note:** The creator (vendor or authenticated customer) is automatically set based on the authenticated user."
          },
          "response": [
            {
              "name": "Success Response (Created)",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"national_code\": \"1234567890\",\n    \"mobile\": \"09123456789\",\n    \"first_name\": \"علی\",\n    \"last_name\": \"احمدی\",\n    \"birth_date\": \"1990-05-15\",\n    \"email\": \"ali.ahmadi@example.com\",\n    \"address\": \"تهران، خیابان ولیعصر\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"national_code\": \"1234567890\",\n        \"mobile\": \"09123456789\",\n        \"first_name\": \"علی\",\n        \"last_name\": \"احمدی\",\n        \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n        \"email\": \"ali.ahmadi@example.com\",\n        \"address\": \"تهران، خیابان ولیعصر، پلاک 123\",\n        \"created_at\": \"2024-01-20T14:30:00.000000Z\",\n        \"updated_at\": \"2024-01-20T14:30:00.000000Z\"\n    }\n}"
            },
            {
              "name": "Success Response (Existing Customer)",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"national_code\": \"1234567890\",\n    \"mobile\": \"09123456789\",\n    \"first_name\": \"علی\",\n    \"last_name\": \"احمدی\",\n    \"birth_date\": \"1990-05-15\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"national_code\": \"1234567890\",\n        \"mobile\": \"09123456789\",\n        \"first_name\": \"علی\",\n        \"last_name\": \"احمدی\",\n        \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n        \"email\": \"ali.ahmadi@example.com\",\n        \"address\": \"تهران، خیابان ولیعصر\",\n        \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n        \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n    }\n}"
            },
            {
              "name": "Validation Error",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"national_code\": \"12345\",\n    \"mobile\": \"1234567890\",\n    \"first_name\": \"Ali\",\n    \"last_name\": \"Ahmadi\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers"
                  ]
                }
              },
              "status": "Unprocessable Entity",
              "code": 422,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"message\": \"The national code must be 10 characters. (and 3 more errors)\",\n    \"errors\": {\n        \"national_code\": [\"The national code must be 10 characters.\"],\n        \"mobile\": [\"The mobile format is invalid.\"],\n        \"first_name\": [\"The first name must be a valid Persian name.\"],\n        \"last_name\": [\"The last name must be a valid Persian name.\"],\n        \"birth_date\": [\"The birth date field is required.\"]\n    }\n}"
            }
          ]
        },
        {
          "name": "Show Customer",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/{{customerId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "customers",
                "{{customerId}}"
              ]
            },
            "description": "Fetch a single customer resource by ID.\n\n**Response includes:**\n- Customer ID\n- National code\n- Mobile number\n- First and last name (Persian)\n- Birth date\n- Email (if provided)\n- Address (if provided)\n- Timestamps"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/{{customerId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers",
                    "{{customerId}}"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"national_code\": \"1234567890\",\n        \"mobile\": \"09123456789\",\n        \"first_name\": \"علی\",\n        \"last_name\": \"احمدی\",\n        \"birth_date\": \"1990-05-15T00:00:00.000000Z\",\n        \"email\": \"ali.ahmadi@example.com\",\n        \"address\": \"تهران، خیابان ولیعصر، پلاک 123\",\n        \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n        \"updated_at\": \"2024-01-15T10:30:00.000000Z\"\n    }\n}"
            },
            {
              "name": "Not Found",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/00000000-0000-0000-0000-000000000000",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers",
                    "00000000-0000-0000-0000-000000000000"
                  ]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"message\": \"No query results for model [App\\\\Models\\\\Customer] 00000000-0000-0000-0000-000000000000\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Credit Scores",
      "description": "Endpoints for requesting and retrieving customer credit scores",
      "item": [
        {
          "name": "Request Credit Score",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/{{customerId}}/credit-scores",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "customers",
                "{{customerId}}",
                "credit-scores"
              ]
            },
            "description": "Trigger the credit scoring engine for the specified customer. Generates a new credit score initiated by the vendor.\n\n**Important:**\n- No request body is required\n- If a recent score exists, future optimization may return it instead of creating a new record\n- The response returns the newly created score\n"
          },
          "response": [
            {
              "name": "Success Response (Created)",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/{{customerId}}/credit-scores",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers",
                    "{{customerId}}",
                    "credit-scores"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"2c1a73a0-18f4-4a47-86cb-9c8d7c7a5c21\",\n        \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"issued_on\": \"2024-02-10T11:15:00.000000Z\",\n        \"status\": \"completed\",\n        \"overall_score\": 742,\n        \"customer\": {\n            \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"national_code\": \"1234567890\",\n            \"mobile\": \"09123456789\",\n            \"first_name\": \"علی\",\n            \"last_name\": \"احمدی\"\n        },\n        \"created_at\": \"2024-02-10T11:15:00.000000Z\",\n        \"updated_at\": \"2024-02-10T11:15:00.000000Z\"\n    }\n}"
            }
          ]
        },
        {
          "name": "Get Latest Credit Score",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "description": "Request JSON response"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/{{customerId}}/credit-scores",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "v1",
                "vendors",
                "{{vendorSlug}}",
                "customers",
                "{{customerId}}",
                "credit-scores"
              ]
            },
            "description": "Fetch the most recent credit score that belongs to the given customer. Response is sorted by `issued_on` and returns the latest record.\n\n**Response includes:**\n- Score metadata (ID, issued date, status, overall score)\n- Nested customer summary (if loaded)\n- Timestamps"
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/{{customerId}}/credit-scores",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers",
                    "{{customerId}}",
                    "credit-scores"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"data\": {\n        \"id\": \"3d2b94b1-6f65-4c8b-a416-ef5cedcafa99\",\n        \"customer_id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n        \"issued_on\": \"2024-03-01T09:45:00.000000Z\",\n        \"status\": \"completed\",\n        \"overall_score\": 755,\n        \"customer\": {\n            \"id\": \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\",\n            \"national_code\": \"1234567890\",\n            \"mobile\": \"09123456789\",\n            \"first_name\": \"علی\",\n            \"last_name\": \"احمدی\"\n        },\n        \"created_at\": \"2024-03-01T09:45:00.000000Z\",\n        \"updated_at\": \"2024-03-01T09:45:00.000000Z\"\n    }\n}"
            },
            {
              "name": "Not Found",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/v1/vendors/{{vendorSlug}}/customers/00000000-0000-0000-0000-000000000000/credit-scores",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "v1",
                    "vendors",
                    "{{vendorSlug}}",
                    "customers",
                    "00000000-0000-0000-0000-000000000000",
                    "credit-scores"
                  ]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": "{\n    \"message\": \"No query results for model [App\\\\Models\\\\CreditScore]\"\n}"
            }
          ]
        }
      ]
    }
  ]
}